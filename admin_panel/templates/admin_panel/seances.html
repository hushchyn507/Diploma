{% extends 'admin_panel/base3.html' %}
{% load static %}

{% block content %}
    <head>
        <link rel="stylesheet" href="{% static 'admin_panel/seances/seances.css' %}">
        <link  rel="stylesheet" href="{% static 'admin_panel/seances/preview_scheme.css' %} " />
    </head>
      <div class="content">
         <div class="content__grid">
             <div class="sidebar-second">
                 <div class="sidebar-second__title"> Фильтры</div>
                 <a class="btn-crt btn-primary btn-primary_corner"  href="{% url 'seance_form' %}">Создать сеанс</a>
                 <form id="form-filter" action="#">
                    <hr>
                     <div class="sidebar-second__subtitle">Дата:</div>
                     <div class="sidebar-second__grid">
                         <input type="date" name="period" id="date" class="sidebar-second__input sidebar-second__input_date">
                     </div>
                    <hr>
                     <div class="sidebar-second__subtitle">Фильмы:</div>
                     <div class="sidebar-second__grid">
                          {% for checked,film in film_list %}
                            <input type="checkbox"  name="films_filter" {% if checked == 'checked' %}  checked {% endif %} value="{{ film.id }}"  >
                            <label for="films_filter">{{ film.name }}</label>
                          {% endfor %}
                     </div>
                    <hr>
                     <div class="sidebar-second__subtitle">Залы:</div>
                     <div class="sidebar-second__grid">
                           {% for checked, hall in hall_list %}
                            <input type="checkbox"   name="halls_filter" {% if checked == 'checked' %}  checked {% endif %} value="{{ hall.number }}"  >
                            <label for="halls_filter">Зал {{ hall.number }} </label>
                            {% endfor %}
                     </div>
                    <hr>
                     <div class="sidebar-second__subtitle">Технологии:</div>
                     <div class="sidebar-second__grid">
                          {% for checked,tech in tech_list %}
                            <input type="checkbox"  name="techs_filter" {% if checked == 'checked' %}  checked {% endif %} value="{{ tech.name }}">
                            <label for="{{ tech.name }}"> {{ tech.name }}</label>
                            {% endfor %}
                     </div>
                 </form>
             </div>
             <div class="film">
                 {% for film ,date_film  in result %}
                     <div class="film__item">
                         <div class="film__title"><a href="{% url 'film_card' film.name %}">{{ film.name }} ({{ film.legal_age}}+)</a></div>
                         <div class="film__info info">
                             {% for date,hall_film in date_film %}
                                 <div class="info__date">
                                     <div class="info__text">{{ date }}</div>
                                     {% for hall,tech_film in hall_film %}
                                         <div class="info__hall" >
                                             <div class="info__hall_scheme" hidden>
                                                 <div class="hall" >
                                                    {{ hall.scheme_html | safe }}
                                                 </div>
                                             </div>

                                             <div class="info__text">Зал №{{ hall.number }}</div>
                                             {% for tech,seances in tech_film %}
                                                 <div class="info__tech">
                                                     <div class="info__text">{{ tech }}</div>
                                                     <div class="info__grid">
                                                         {% for seance in seances %}
                                                             <div class="info__time" data-seance_id={{ seance.id  }} >
                                                                 {{ seance.time }}
                                                                <a class="info__remove"  href='{% url 'delete_seance' seance.id  %}' hidden>Удалить</a>
                                                             </div>
                                                         {% endfor %}

                                                     </div>
                                                 </div>
                                             {% endfor %}
                                         </div>
                                     {% endfor %}
                                 </div>
                             {% endfor %}
                         </div>
                     </div>
                 {% endfor %}
             </div>

         </div>
     </div>
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <script  src="{% static 'admin_panel/seances/seances.js' %}"></script>

{% endblock %}
