{% extends 'admin_panel/base3.html' %}
{% load static %}

{% block content %}
    <head>
        <link rel="stylesheet" href="{% static 'admin_panel/form.css' %}">
        <link rel="stylesheet" href="{% static 'admin_panel/mailing/mailing.css' %}">
        <link rel="stylesheet" href="{% static 'admin_panel/mailing/upload_html.css' %}">
    </head>
     <div class="main__blocks">
         <div class="main__block">
             <div class="main__title">
                 E-mail
             </div>
             <div class="main__card card">
                 <form action="" method="post" enctype="multipart/form-data">
                     {% csrf_token %}
                    <div class="card__sample">
                        <div class="card__title">Выбрать адресатов: </div>
                        <div class="card__radio form__elem form__elem_radio">
                            <div>
                                <label for="all_clients">
                                    Всех
                                    <input type="radio" class="form__elem form__elem_radio" id="all_clients" name="clients" value="all" checked/>
                                </label>
                            </div>
                            <div>
                                <label for="selected_clients">
                                    Выборочно
                                    <input type="radio" class="form__elem form__elem_radio" id="selected_clients" name="clients" value="selected" />
                                </label>
                            </div>
                        </div>
                        <a href="{% url 'choose_client' %}" >
                        <input type="button" class="card__btn btn-primary" value="Выбрать клиентов">
                        </a>
                    </div>
                    <div class="card__subtitle">Выбрать шаблон HTML </div>

                    <div class="card__row form__elem form__elem_radio">
                        <div>
                            <label for="new_template">
                                Новый
                                <input type="radio" class="form__elem form__elem_radio" id="new_template" name="template" value="new" checked/>
                            </label>
                        </div>
                        <div>
                            <label for="previous_template">
                                Старый
                                <input type="radio" class="form__elem form__elem_radio" id="previous_template" name="template" value="previous" />
                            </label>
                        </div>
                    </div>
                    <div class="card__file">
                        {% for row in file_form %}
                            {{ row }}
                        {% endfor %}
                    </div>
                    <div class="card__list">
                        <div class="card__subtitle">Список последних загруженных шаблонов</div>
                        {% for file in templates_html %}
                            <div class="card__list-item list-item">
                                <div class="list-item__radio">
                                    <input type="radio" name="templates_filter" value="{{ file.id }}">
                                </div>
                                <div class="list-item__name">{{ file.filename }}</div>
                                <a href="{% url 'delete_template' file.id %}">
                                    <div class="list-item__del">
                                        Удалить
                                    </div>
                                </a>

                            </div>
                        {% endfor %}

                    </div>
                    <div class="form__bottom">
                        <button class="form__btn btn-primary btn-primary_corner">Начать рассылку</button>
                    </div>
                 </form>
             </div>
         </div>
     </div>

    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <script type="module" src="{% static 'admin_panel/mailing/upload_html.js' %}"></script>
    <script type="module" src="{% static 'admin_panel/mailing/mailing.js' %}"></script>
{% endblock %}